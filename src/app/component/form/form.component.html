<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div *ngFor="let input of buildInputs">
    <div *ngIf="input?.type !== 'checkbox'">
      <ion-item>
        <ion-label position="floating">{{ input?.label }}</ion-label>
        <ion-input
          [type]="visiblePassword ? 'text' : input?.type"
          [formControlName]="input?.name"
          [inputmode]="input?.type"
          [placeholder]="input?.placeholder"
          [attr.aria-message]="input?.ActionLabel"
        ></ion-input>

        <ion-button
          aria-message="Visualizar e ocultar senha."
          *ngIf="
            input?.name === 'passwordConfirmation' ||
            (input?.name === 'password' && attrButton?.route === 'login')
          "
          slot="end"
          fill="clear"
          (click)="showPassword()"
          class="ion-margin-top"
          [title]="visiblePassword ? 'Ocultar senha' : 'Ver senha'"
        >
          <ion-icon
            [name]="visiblePassword ? 'eye-off-outline' : 'eye-outline'"
            color="medium"
          ></ion-icon>
        </ion-button>
      </ion-item>

      <ion-text color="danger" *ngIf="submitted && f[input?.name].errors">
        <small
          *ngIf="f[input?.name].errors.email"
          [attr.aria-message]="input.msg?.invalid"
          >{{ input.msg?.invalid }}</small
        >
        <small
          *ngIf="f[input?.name].errors.pattern"
          [attr.aria-message]="input.msg?.invalid"
          >{{ input.msg?.invalid }}</small
        >
        <small
          *ngIf="f[input?.name].errors.required"
          [attr.aria-message]="input.msg?.empty"
          >{{ input.msg?.empty }}</small
        >
        <small
          *ngIf="f[input?.name].errors.maxlength"
          [attr.aria-message]="input?.msg?.max"
          >{{ input?.msg?.max }}</small
        >
        <small
          *ngIf="f[input?.name].errors.minlength"
          [attr.aria-message]="input?.msg?.min"
          >{{ input?.msg?.min }}</small
        >
      </ion-text>
    </div>

    <!-- terms -->
    <div *ngIf="input?.name === 'terms'">
      <ion-item lines="none">
        <ion-checkbox color="success" [formControlName]="input?.name" [attr.aria-message]="input?.label">
        </ion-checkbox>
        <ion-text class="ion-margin-start">{{ input?.label }}</ion-text>
      </ion-item>

      <div class="ion-text-start" *ngIf="submitted && f[input?.name].errors">
        <ion-text color="danger" *ngIf="!form.controls['terms'].valid">
          <small [attr.aria-message]="input?.msg?.invalid">{{ input?.msg?.invalid }}</small>
        </ion-text>
      </div>

      <ion-text
        class="cursor"
        color="secondary"
      >
        <small class="cursor-pointer" title="Ver termos de uso do jussara.app." routerLink="/termos-de-uso" data-label="Ver termos de uso?"> Ver termos de uso? </small>
      </ion-text>
    </div>
  </div>

  <ion-button
    *ngIf="buildInputs.length > 0"
    type="submit"
    expand="block"
    class="ion-margin-vertical"
    [fill]="attrButton?.fill ? 'outline': 'solid'"
    [attr.aria-message]="attrButton?.aria"
    [title]="attrButton?.title"
  >
    <ion-icon class="ion-margin-end" [name]="attrButton?.icon"></ion-icon>
    {{ attrButton?.label }}
  </ion-button>
</form>
